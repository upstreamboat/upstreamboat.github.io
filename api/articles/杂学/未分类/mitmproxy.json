{"title":"mitmproxy","uid":"d62d040dfd4c4e9113c3e8f147f56a41","slug":"杂学/未分类/mitmproxy","date":"2024-10-10T07:26:00.139Z","updated":"2024-10-19T08:21:51.632Z","comments":true,"path":"api/articles/杂学/未分类/mitmproxy.json","keywords":null,"cover":"/images/cover/1.png","content":"<h1 id=\"证书安装\"><a href=\"#证书安装\" class=\"headerlink\" title=\"证书安装\"></a>证书安装</h1><ol>\n<li>启动 mimtweb 或 mitmporxy</li>\n<li>windows 端：设置代理：填写 ip+port；（手机端：网络连接-代理-ip+port）</li>\n<li>打开网址：<a href=\"http://mitm.it/\">http://mitm.it/</a></li>\n</ol>\n<h1 id=\"使用\"><a href=\"#使用\" class=\"headerlink\" title=\"使用\"></a>使用</h1><ul>\n<li>手机端：网络连接-代理-ip+port</li>\n<li>本地 windows 端：设置代理</li>\n<li>其它 windows 端：设置网关地址为开启 mitm 服务的电脑 ip</li>\n</ul>\n<h1 id=\"启动命令\"><a href=\"#启动命令\" class=\"headerlink\" title=\"启动命令\"></a>启动命令</h1><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mitmweb.exe -p 9090 --web-port 9091 --mode socks5</span><br><span class=\"line\"></span><br><span class=\"line\"># -p：指定代理端口</span><br><span class=\"line\"></span><br><span class=\"line\"># --web-port：web的端口</span><br><span class=\"line\"></span><br><span class=\"line\"># --mode：代理协议模式：http（默认）、socks5</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"mitmproxy-修改响应\"><a href=\"#mitmproxy-修改响应\" class=\"headerlink\" title=\"mitmproxy 修改响应\"></a>mitmproxy 修改响应</h1><ol>\n<li>安装  mitmproxy：<code>pip install mitmproxy</code></li>\n<li>创建  modify_response.py</li>\n</ol>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> mitmproxy <span class=\"keyword\">import</span> http</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">response</span>(<span class=\"params\">flow: http.HTTPFlow</span>) -&gt; <span class=\"literal\">None</span>:</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> flow.request.method == <span class=\"string\">&#x27;GET&#x27;</span> <span class=\"keyword\">and</span> flow.request.host == <span class=\"string\">&#x27;[www.ea.com](http://www.ea.com)&#x27;</span> <span class=\"keyword\">and</span> flow.request.path.startswith(<span class=\"string\">&#x27;/ea-sports-fc/ultimate-team/web-app/js/&#x27;</span>):</span><br><span class=\"line\"></span><br><span class=\"line\">        flow.response.content = flow.response.content.decode(encoding=<span class=\"string\">&#x27;utf-8&#x27;</span>).replace(<span class=\"string\">&quot;debugger&quot;</span>, <span class=\"string\">&quot;return&quot;</span>).encode(encoding=<span class=\"string\">&#x27;utf-8&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;modify: &#x27;</span> + flow.request.path)</span><br></pre></td></tr></table></figure>\n\n<ol start=\"3\">\n<li>启动 mitmproxy，运行脚本：<code>mitmproxy -s modify_response.py</code></li>\n</ol>\n","text":"证书安装 启动 mimtweb 或 mitmporxy windows 端：设置代理：填写 ip+port；（手机端：网络连接-代理-ip+port） 打开网址...","permalink":"/post/杂学/未分类/mitmproxy","photos":[],"count_time":{"symbolsCount":938,"symbolsTime":"1 mins."},"categories":[{"name":"未分类","slug":"未分类","count":25,"path":"api/categories/未分类.json"}],"tags":[{"name":"技术","slug":"技术","count":168,"path":"api/tags/技术.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E8%AF%81%E4%B9%A6%E5%AE%89%E8%A3%85\"><span class=\"toc-text\">证书安装</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E4%BD%BF%E7%94%A8\"><span class=\"toc-text\">使用</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E5%90%AF%E5%8A%A8%E5%91%BD%E4%BB%A4\"><span class=\"toc-text\">启动命令</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#mitmproxy-%E4%BF%AE%E6%94%B9%E5%93%8D%E5%BA%94\"><span class=\"toc-text\">mitmproxy 修改响应</span></a></li></ol>","author":{"name":"upstreamboat","slug":"blog-author","avatar":"images/favicon/favicon.ico","link":"/","description":"nothing to say","socials":{"github":"https://github.com/upstreamboat","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"bilibili":{"icon":"/images/favicon/bilibili.svg","link":"https://www.bilibili.com/"},"chatgpt":{"icon":"/images/favicon/chatgpt.svg","link":"https://chatgpt.com/"}}}},"mapped":true,"hidden":false,"prev_post":{"title":"环境变量","uid":"5a1ac8f7ce2fe72478de5e28a4dd163f","slug":"杂学/未分类/环境变量","date":"2024-10-10T07:32:34.244Z","updated":"2024-10-26T06:31:54.648Z","comments":true,"path":"api/articles/杂学/未分类/环境变量.json","keywords":null,"cover":"/images/cover/1.png","text":"环境变量优先级用户变量 > 系统变量 linux 下配置文件.bashrc：用户环境变量 /etc/profile：系统环境变量 ","permalink":"/post/杂学/未分类/环境变量","photos":[],"count_time":{"symbolsCount":78,"symbolsTime":"1 mins."},"categories":[{"name":"未分类","slug":"未分类","count":25,"path":"api/categories/未分类.json"}],"tags":[{"name":"技术","slug":"技术","count":168,"path":"api/tags/技术.json"}],"author":{"name":"upstreamboat","slug":"blog-author","avatar":"images/favicon/favicon.ico","link":"/","description":"nothing to say","socials":{"github":"https://github.com/upstreamboat","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"bilibili":{"icon":"/images/favicon/bilibili.svg","link":"https://www.bilibili.com/"},"chatgpt":{"icon":"/images/favicon/chatgpt.svg","link":"https://chatgpt.com/"}}}}},"next_post":{"title":"swagger","uid":"a7119afd38af4bcd28d22403fa6c78f9","slug":"杂学/未分类/swagger","date":"2024-10-10T07:20:01.561Z","updated":"2024-10-19T08:21:49.076Z","comments":true,"path":"api/articles/杂学/未分类/swagger.json","keywords":null,"cover":"/images/cover/1.png","text":" 下载 swagger 包go get -u github.com/swaggo/gin-swagger 123456789101112131415161718...","permalink":"/post/杂学/未分类/swagger","photos":[],"count_time":{"symbolsCount":853,"symbolsTime":"1 mins."},"categories":[{"name":"未分类","slug":"未分类","count":25,"path":"api/categories/未分类.json"}],"tags":[{"name":"技术","slug":"技术","count":168,"path":"api/tags/技术.json"}],"author":{"name":"upstreamboat","slug":"blog-author","avatar":"images/favicon/favicon.ico","link":"/","description":"nothing to say","socials":{"github":"https://github.com/upstreamboat","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"bilibili":{"icon":"/images/favicon/bilibili.svg","link":"https://www.bilibili.com/"},"chatgpt":{"icon":"/images/favicon/chatgpt.svg","link":"https://chatgpt.com/"}}}}}}