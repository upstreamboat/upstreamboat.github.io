{"title":"易错知识","uid":"35abbd806d5efafaff1901d4654f89d1","slug":"GO语言/运用/易错知识","date":"2024-10-12T02:28:09.260Z","updated":"2024-10-19T08:25:58.010Z","comments":true,"path":"api/articles/GO语言/运用/易错知识.json","keywords":null,"cover":"/images/cover/5.png","content":"<h1 id=\"易错知识\"><a href=\"#易错知识\" class=\"headerlink\" title=\"易错知识\"></a>易错知识</h1><ul>\n<li>strings.Clone</li>\n</ul>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 假设输入的log长度为1000字节</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// uuid新分配了36字节，但是已经无用的log仍然占用1000字节没有释放，导致内存泄漏</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">handleLog</span><span class=\"params\">(log <span class=\"type\">string</span>)</span></span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">uuid := log[:<span class=\"number\">36</span>]</span><br><span class=\"line\"></span><br><span class=\"line\">...</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// strings.CLone()可以自动释放内存</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">handleLog</span><span class=\"params\">(log <span class=\"type\">string</span>)</span></span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">uuid :=strings.Clone(log[:<span class=\"number\">36</span>])</span><br><span class=\"line\"></span><br><span class=\"line\">...</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>nil 调用方法</li>\n</ul>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> Foo <span class=\"keyword\">struct</span> &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> （<span class=\"title\">foo</span> *<span class=\"title\">Foo</span>)<span class=\"title\">Bar</span><span class=\"params\">()</span></span> <span class=\"type\">string</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">return</span> <span class=\"string\">&quot;bar&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span>（）</span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> foo *Foo</span><br><span class=\"line\"></span><br><span class=\"line\">fmt.Println（foo.Bar()）<span class=\"comment\">// 可以成功调用并打印。因为foo的值虽然是nil，但其类型是*Foo，是可以调用方法的，只是传入Bar()方法中的foo是nil罢了</span></span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","text":"易错知识 strings.Clone 12345678910111213141516171819// 假设输入的log长度为1000字节// uuid新分配了3...","permalink":"/post/GO语言/运用/易错知识","photos":[],"count_time":{"symbolsCount":520,"symbolsTime":"1 mins."},"categories":[{"name":"GO语言","slug":"GO语言","count":77,"path":"api/categories/GO语言.json"}],"tags":[{"name":"技术","slug":"技术","count":168,"path":"api/tags/技术.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E6%98%93%E9%94%99%E7%9F%A5%E8%AF%86\"><span class=\"toc-text\">易错知识</span></a></li></ol>","author":{"name":"upstreamboat","slug":"blog-author","avatar":"images/favicon/favicon.ico","link":"/","description":"nothing to say","socials":{"github":"https://github.com/upstreamboat","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"bilibili":{"icon":"/images/favicon/bilibili.svg","link":"https://www.bilibili.com/"},"chatgpt":{"icon":"/images/favicon/chatgpt.svg","link":"https://chatgpt.com/"}}}},"mapped":true,"hidden":false,"prev_post":{"title":"目录相关实例","uid":"e7d194280cea056de0f746d5c82db848","slug":"GO语言/运用/目录相关实例","date":"2024-10-12T02:28:09.284Z","updated":"2024-10-19T08:25:59.766Z","comments":true,"path":"api/articles/GO语言/运用/目录相关实例.json","keywords":null,"cover":"/images/cover/5.png","text":"目录相关实例 遍历目录下的文件，但不遍历子目录 12345678910111213141516171819202122232425262728293031323...","permalink":"/post/GO语言/运用/目录相关实例","photos":[],"count_time":{"symbolsCount":"1.3k","symbolsTime":"1 mins."},"categories":[{"name":"GO语言","slug":"GO语言","count":77,"path":"api/categories/GO语言.json"}],"tags":[{"name":"技术","slug":"技术","count":168,"path":"api/tags/技术.json"}],"author":{"name":"upstreamboat","slug":"blog-author","avatar":"images/favicon/favicon.ico","link":"/","description":"nothing to say","socials":{"github":"https://github.com/upstreamboat","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"bilibili":{"icon":"/images/favicon/bilibili.svg","link":"https://www.bilibili.com/"},"chatgpt":{"icon":"/images/favicon/chatgpt.svg","link":"https://chatgpt.com/"}}}}},"next_post":{"title":"切片运用","uid":"7b61dbd7da63db21b1595dbf2fd4ec11","slug":"GO语言/运用/切片运用","date":"2024-10-12T02:28:09.243Z","updated":"2024-10-19T08:25:56.397Z","comments":true,"path":"api/articles/GO语言/运用/切片运用.json","keywords":null,"cover":"/images/cover/5.png","text":"切片运用 去重 1234567891011121314151617181920212223func removeDuplicates(s []int) []in...","permalink":"/post/GO语言/运用/切片运用","photos":[],"count_time":{"symbolsCount":427,"symbolsTime":"1 mins."},"categories":[{"name":"GO语言","slug":"GO语言","count":77,"path":"api/categories/GO语言.json"}],"tags":[{"name":"技术","slug":"技术","count":168,"path":"api/tags/技术.json"}],"author":{"name":"upstreamboat","slug":"blog-author","avatar":"images/favicon/favicon.ico","link":"/","description":"nothing to say","socials":{"github":"https://github.com/upstreamboat","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"bilibili":{"icon":"/images/favicon/bilibili.svg","link":"https://www.bilibili.com/"},"chatgpt":{"icon":"/images/favicon/chatgpt.svg","link":"https://chatgpt.com/"}}}}}}